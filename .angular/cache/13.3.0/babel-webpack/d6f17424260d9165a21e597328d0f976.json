{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Injectable } from '@angular/core';\nlet AuthService = class AuthService {\n  constructor(router, afAuth, afs) {\n    this.router = router;\n    this.afAuth = afAuth;\n    this.afs = afs;\n  }\n\n  logout() {\n    this.afAuth.auth.signOut();\n    this.router.navigate(['']);\n  }\n\n  isLoggedIn() {\n    return !!this.afAuth.auth.currentUser;\n  }\n\n  createUserDocument() {\n    // get the current user\n    const user = this.afAuth.auth.currentUser; // create the object with new data\n\n    const userProfile = {\n      uid: user.uid,\n      email: user.email,\n      name: user.displayName,\n      address: '',\n      city: '',\n      state: '',\n      zip: '',\n      phone: '',\n      specialty: '',\n      ip: ''\n    }; // write to Cloud Firestore\n\n    return this.afs.doc(`users/${user.uid}`).set(userProfile);\n  }\n\n  updateUserDocument(userProfile) {\n    return this.afs.doc(`users/${userProfile.uid}`).update(userProfile);\n  }\n\n  routeOnLogin() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const user = this.afAuth.auth.currentUser;\n      const token = yield user.getIdTokenResult();\n\n      if (token.claims.admin) {\n        this.router.navigate(['/users']);\n      } else {\n        this.router.navigate([`/profile/${user.uid}`]);\n      }\n    });\n  }\n\n};\nAuthService = __decorate([Injectable({\n  providedIn: 'root'\n})], AuthService);\nexport { AuthService };","map":null,"metadata":{},"sourceType":"module"}